<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <title>NIS Restaurant - 专 砖</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="/css/global.css" rel="stylesheet" type="text/css">
    <link href="/css/personal_area.css" rel="stylesheet" type="text/css">
</head>

<body>
    <%- include('includes/header') %>
    <%- include('includes/navbar') %>

    <div class="content-wrapper">
        <main class="main">
            <div class="personal-header text-center mb-5">
                <h1 class="culture-main-title">砖, <%= user.firstName %>! </h1>
                <p class="culture-subtitle">专 拽专 砖 砖 - NIS Restaurant</p>
                <hr class="title-separator">
            </div>

            <div class="row g-4 mb-5">
                <div class="col-md-6 col-lg-3">
                    <div class="value-card h-100" onclick="showSection('reservationsSection')">
                        <i class="fas fa-utensils"></i>
                        <h5>转 砖</h5>
                        <p class="small text-muted"> 拽转 住注</p>
                        <span class="badge-count"><%= resList.length %> 专砖转</span>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3">
                    <div class="value-card h-100" onclick="showSection('ordersSection')">
                        <i class="fas fa-motorcycle"></i>
                        <h5>转 砖</h5>
                        <p class="small text-muted">住住 转 转</p>
                        <span class="badge-count"><%= deliveryList.length %> 专砖转</span>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3">
                    <div class="value-card h-100" onclick="showSection('messagesSection')">
                        <i class="fas fa-comment-dots"></i>
                        <h5>驻转 爪专 拽砖专</h5>
                        <p class="small text-muted">转转转 注 爪转</p>
                        <span class="badge-count"><%= messageList.length %> 专砖转</span>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3">
                    <div class="value-card h-100" onclick="showSection('jobsSection')">
                        <i class="fas fa-briefcase"></i>
                        <h5>砖专转 拽专专</h5>
                        <p class="small text-muted">住住 砖转 注转</p>
                        <span class="badge-count"><%= jobList.length %> 专砖转</span>
                    </div>
                </div>
            </div>

            <div class="login-container-box mx-auto mt-2 display-area-hidden" id="displayArea">
                
                <div id="reservationsSection" class="content-section-item">
                    <h3 class="form-title text-center mb-4"><i class="fas fa-utensils me-2"></i> 转 砖 砖</h3>
                    <% if (resList.length > 0) { %>
                        <div class="table-responsive">
                            <table class="table custom-table-ui">
                                <thead>
                                    <tr>
                                        <th>转专</th>
                                        <th>砖注</th>
                                        <th>住注</th>
                                        <th>住住</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% resList.forEach(res => { %>
                                        <tr>
                                            <td><%= res.date %></td>
                                            <td><%= res.time %></td>
                                            <td><%= res.num_of_people %></td>
                                            <td><span class="badge bg-success">砖专</span></td>
                                        </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    <% } else { %>
                        <p class="text-center p-4">注  爪注转 转 砖.</p>
                    <% } %>
                </div>

                <div id="ordersSection" class="content-section-item">
                    <h3 class="form-title text-center"><i class="fas fa-motorcycle me-2"></i> 住专转 砖</h3>
                    <% if (deliveryList && deliveryList.length > 0) { %>
                        <div class="table-responsive">
                            <table class="table custom-table-ui">
                                <thead>
                                    <tr>
                                        <th>转专</th>
                                        <th>转转</th>
                                        <th>砖注转 砖</th>
                                        <th>住住</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% deliveryList.forEach(order => { %>
                                        <tr>
                                            <td><%= new Date(order.created_at).toLocaleDateString('he-IL') %></td>
                                            <td><%= order.city %>, <%= order.street %> <%= order.house_number %></td>
                                            <td><%= order.delivery_time %></td>
                                            <td><span class="badge bg-info text-dark">驻</span></td>
                                        </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    <% } else { %>
                        <p class="text-center p-4"> 砖 驻注 爪 专注.</p>
                    <% } %>
                </div>

                <div id="messagesSection" class="content-section-item">
                    <h3 class="form-title text-center"><i class="fas fa-comment-dots me-2"></i> 驻转 砖专转 拽转</h3>
                    <% if (messageList && messageList.length > 0) { %>
                        <div class="table-responsive">
                            <table class="table custom-table-ui">
                                <thead>
                                    <tr>
                                        <th>砖 驻</th>
                                        <th>砖 驻</th>
                                        <th>转 注</th>
                                        <th>住住</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% messageList.forEach(msg => { %>
                                        <tr>
                                            <td><%= (msg.firstName || '') + " " + (msg.lastName || '') %></td>
                                            <td><strong><%= msg.subject %></strong></td>
                                            <td><%= msg.message %></td>
                                            <td><span class="badge bg-warning text-dark">砖 爪转</span></td>
                                        </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    <% } else { %>
                        <p class="text-center p-4"> 爪 驻转 拽转 注专转.</p>
                    <% } %>
                </div>

                <div id="jobsSection" class="content-section-item">
                    <h3 class="form-title text-center"><i class="fas fa-briefcase me-2"></i> 砖转 注转 注</h3>
                    <% if (jobList && jobList.length > 0) { %>
                        <div class="table-responsive">
                            <table class="table custom-table-ui">
                                <thead>
                                    <tr>
                                        <th>砖 注</th>
                                        <th>驻</th>
                                        <th>专</th>
                                        <th>住住</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% jobList.forEach(job => { %>
                                        <tr>
                                            <td><%= (job.firstName || '') + " " + (job.lastName || '') %></td>
                                            <td><%= job.phone %></td>
                                            <td><%= job.gender %></td>
                                            <td><span class="badge bg-secondary">拽</span></td>
                                        </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    <% } else { %>
                        <p class="text-center p-4">专 砖转 注转 砖专 -NIS.</p>
                    <% } %>
                </div>
            </div>
        </main>
    </div>

    <%- include('includes/footer') %>
    <%- include('includes/popup') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/personal_area.js"></script>
</body>
</html>